
{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended", "docker:pinDigests"],
  "timezone": "America/Sao_Paulo",

  "enabledManagers": ["kustomize"],

  // Restrito ao arquivo que realmente controla o tag do n8n
  "kustomize": {
    "managerFilePatterns": ["/^n8n/kustomization\\.ya?ml$/"]
  },

  "packageRules": [
    {
      "matchManagers": ["kustomize"],
      "matchDatasources": ["docker"],
      "matchPackageNames": ["n8nio/n8n"],
      "groupName": "n8n image",
      "automerge": true,
      "automergeType": "pr",
      "pinDigests": true
    }
  ],

  // Deixa o GitHub fazer o merge assim que branch protection/checks forem satisfeitos
  "platformAutomerge": true
}

